<Window x:Class="DocCreator01.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:DocCreator01.ViewModels"
        xmlns:views="clr-namespace:DocCreator01.Views"
        Title="{Binding WindowTitle}"
        Height="800" 
        Width="1200">



    
    
    <Window.InputBindings>
        <KeyBinding Key="S"
                    Modifiers="Control"
                    Command="{Binding SaveCommand}" />
    </Window.InputBindings>



    <DockPanel>
        <!-- Верхнее меню -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="Файл">
                <MenuItem Header="Открыть…"
                          Command="{Binding OpenCommand}" />
                <MenuItem Header="Сохранить"
                          Command="{Binding SaveCommand}" />
                <MenuItem Header="Закрыть"
                          Command="{Binding CloseCurrentCommand}" />

                <Separator />

                <!-- пункт «Выход» остаётся на своём месте -->
                <MenuItem Header="Выход"
                          Command="{Binding ExitCommand}" />

                <!-- разделитель до блока последних файлов -->
                <Separator />

                <!-- Блок «Последние файлы» автоматически заполняется -->
                <MenuItem Header="Недавние" x:Name="RecentFilesMenu">
                    <MenuItem.ItemsSource>
                        <Binding Path="RecentFiles" />
                    </MenuItem.ItemsSource>
                    <MenuItem.ItemTemplate>
                        <DataTemplate>
                            <MenuItem Header="{Binding}" Command="{Binding DataContext.OpenRecentCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}" />
                        </DataTemplate>
                    </MenuItem.ItemTemplate>
                </MenuItem>
            </MenuItem>
        </Menu>

        <!-- Основная сетка -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="180"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="260"/>
            </Grid.ColumnDefinitions>

            <!-- Левая голубая панель -->
            <views:TextPartsPanelUserControl Grid.Column="0" DataContext="{Binding}"/>

            <!-- Центральный TabControl -->
            <views:TabControlPanelUserControl Grid.Column="1" DataContext="{Binding}"/>

            <!-- Правая колонка -->
            <DockPanel Grid.Column="2" Margin="10,0,0,0">
                <Border Background="#E5A100" DockPanel.Dock="Top">
                    <StackPanel>
                        <TextBlock Text="Status"
                                   Foreground="White"
                                   HorizontalAlignment="Center"
                                   Margin="0,10,0,5"/>
                        
                        <!-- Add the SettingsUserControl here -->
                        <views:SettingsUserControl 
                            DataContext="{Binding SettingsViewModel}" 
                            Background="White" 
                            Margin="10" 
                            Padding="5"/>
                    </StackPanel>
                </Border>

                <Button Content="Create"
                        Command="{Binding GenerateCommand}"
                        Height="50" Margin="0,10,0,10"
                        Background="#0063B1" Foreground="White"
                        DockPanel.Dock="Top"/>

                <ListBox ItemsSource="{Binding GeneratedFilesViewModels}"
                         Background="#FEFDB0" DockPanel.Dock="Bottom">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Margin="5"
                                        ToolTip="{Binding IconPath}">
                                <Image Source="{Binding IconPath}" Width="32" Height="32"/>
                                <TextBlock Text="{Binding FileName}" VerticalAlignment="Center" Margin="8,0,0,0"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>

            </DockPanel>
        </Grid>
    </DockPanel>
</Window>
