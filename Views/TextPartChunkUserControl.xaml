<UserControl x:Class="DocCreator01.Views.TextPartChunkUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Height="Auto" Width="Auto">
    <Grid Margin="0,5">
        <Grid.ColumnDefinitions>
            <!-- Change from '*' to 'Auto,*' to ensure content-based width -->
            <ColumnDefinition Width="*" MinWidth="50" />
            <!-- Fixed width with higher priority -->
            <ColumnDefinition Width="Auto" MinWidth="24" />
        </Grid.ColumnDefinitions>

        <!-- Add ScrollViewer to handle content overflow -->
        <ScrollViewer Grid.Column="0" 
                      HorizontalScrollBarVisibility="Auto" 
                      VerticalScrollBarVisibility="Auto">
            <TextBox x:Name="PART_TextBox"
                     Text="{Binding Text, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                     AcceptsReturn="True"
                     TextWrapping="Wrap"
                     Padding="5"
                     HorizontalAlignment="Stretch"
                     VerticalAlignment="Stretch"
                     TextChanged="OnTextChanged">
                <!-- отключаем подсветку при наведении мыши -->
                <TextBox.Style>
                    <Style TargetType="TextBox">
                        <!-- intentionally left empty to clear default hover style -->
                    </Style>
                </TextBox.Style>
            </TextBox>
        </ScrollViewer>

        <!-- delete button - ensure it stays visible -->
        <Button Grid.Column="1"
                Content="[x]"
                Width="20" Height="20"
                Margin="2,0,0,0"
                VerticalAlignment="Top"
                HorizontalAlignment="Center"
                ToolTip="Delete"
                Command="{Binding DataContext.DeleteChunkCommand, 
                          RelativeSource={RelativeSource AncestorType=ListView}}"
                CommandParameter="{Binding}"/>
    </Grid>
</UserControl>
